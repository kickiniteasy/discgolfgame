<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Disc Golf Game</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/DRACOLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://unpkg.com/fflate/umd/index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FBXLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/STLLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/libs/stats.min.js"></script>
    <script src="js/Sky.js"></script>
    <script src="js/UI.js"></script>
    <script src="js/Terrain.js"></script>
    <script src="js/PortalTerrain.js"></script>
    <script src="js/Disc.js"></script>
    <script src="js/Hole.js"></script>
    <script src="js/Teebox.js"></script>
    <script src="js/Course.js"></script>
    <script src="js/Bag.js"></script>
    <script src="js/BagUI.js"></script>
    <script src="js/SettingsUI.js"></script>
    <script src="js/Player.js"></script>
    <script src="js/PlayerManager.js"></script>
    <script src="js/TerrainManager.js"></script>
    <script src="js/CourseManager.js"></script>
    <script src="js/CameraController.js"></script>
    <script src="js/CelebrationEffects.js"></script>
    <script src="js/SVGCourseConverter.js"></script>
    <script src="js/ToasterMessage.js"></script>
    <script src="js/game.js"></script>
</head>
<body>
    <div id="container">
        <a target="_blank" href="https://jam.pieter.com" class="game-jam-link">üïπÔ∏è Vibe Jam 2025</a>
        <button id="settings-button">
            <img src="img/icons/settings.svg" alt="Settings" />
        </button>
        <button id="social-twitter-button">
            <img src="img/icons/social-x-logo.svg" alt="X (Twitter)" />
        </button>

        <div id="ui">
            <div class="game-stats">
                <div class="stat-box hole-stat">
                    <span class="hole-number" id="hole">1</span>
                    <span class="hole-par">Par <span id="par">3</span></span>
                </div>
                <div class="stat-box distance-stat">
                    <div class="distance-value"><span id="distance">0</span>m</div>
                </div>
            </div>
        </div>
        
        <button id="bag-button">
            <img src="img/icons/bag.svg" alt="Bag" />
            Bag
        </button>

        <button id="players-button">
            <img src="img/icons/scorecard.svg" alt="Score" />
            Score
        </button>

        <button id="throw-button">
            <span class="throw-text">THROW</span>
            <svg class="throw-progress" viewBox="0 0 100 100">
                <circle class="throw-progress-bg" cx="50" cy="50" r="45" />
                <circle class="throw-progress-fill" cx="50" cy="50" r="45" />
            </svg>
        </button>

        <div class="camera-controls">
            <button id="show-hole-button" title="Show Hole">
                <svg viewBox="0 0 1024 1024">
                    <circle cx="512" cy="512" r="480" stroke="currentColor" stroke-width="40" fill="none"/>
                    <circle cx="512" cy="512" r="320" stroke="currentColor" stroke-width="40" fill="none"/>
                    <circle cx="512" cy="512" r="160" stroke="currentColor" stroke-width="40" fill="none"/>
                    <circle cx="760" cy="760" r="160" stroke="currentColor" stroke-width="40" fill="none"/>
                    <line x1="650" y1="650" x2="850" y2="850" stroke="currentColor" stroke-width="40" />
                </svg>
            </button>
            <button id="reset-camera-button" title="Reset Camera">
                <svg viewBox="0 0 1024 1024">
                    <circle cx="512" cy="512" r="400" stroke="currentColor" stroke-width="20" fill="none" />
                    <path d="M848 512c0 58.7-20.4 112-54.1 154.3l-19.2-25.7c25.5-28.2 41.2-65 41.2-108.3" stroke="currentColor" stroke-width="20" fill="none" />
                    <path d="M176 512c0-58.7 20.4-112 54.1-154.3l19.2 25.7C225.8 505.9 210 542.7 210 586c0 43.3 15.8 80.1 41.2 108.3" stroke="currentColor" stroke-width="20" fill="none" />
                    <rect x="412" y="412" width="200" height="130" rx="20" ry="20" stroke="currentColor" stroke-width="12" fill="none"/>
                    <circle cx="512" cy="477" r="40" stroke="currentColor" stroke-width="12" fill="none" />
                </svg>
            </button>
        </div>

        <div id="bag-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Disc Golf Bag</h2>
                    <button class="close-button">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="tab-buttons">
                        <button class="tab-button active" data-tab="discs">Discs</button>
                        <button class="tab-button" data-tab="items">Items</button>
                    </div>
                    <div class="tab-content">
                        <div id="discs-tab" class="tab active">
                            <div class="grid discs-grid"></div>
                        </div>
                        <div id="items-tab" class="tab">
                            <div class="grid items-grid"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="players-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Scorecard</h2>
                    <button class="close-button">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="players-list"></div>
                </div>
            </div>
        </div>

        <div id="settings-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Settings</h2>
                    <button class="close-button">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="tab-buttons">
                        <button class="tab-button active" data-tab="players">Players</button>
                        <button class="tab-button" data-tab="courses">Courses</button>
                    </div>
                    <div class="tab-content">
                        <div id="players-tab" class="tab active">
                            <h3 class="section-title">Player Settings</h3>
                            <div id="player-settings-list">
                                <!-- Player rows will be dynamically added here -->
                            </div>
                            <button type="button" class="save-button" id="save-players-button">Save Changes</button>
                        </div>
                        <div id="courses-tab" class="tab">
                            <h3 class="section-title">Pre-built Courses</h3>
                            <div class="form-group">
                                <select id="course-select">
                                    <option value="">Select a course...</option>
                                </select>
                            </div>

                            <h3 class="section-title">Create Your Own Course</h3>
                            <p class="course-info">Create your own course using our JSON schema. Each course consists of holes with teeboxes, baskets, and optional terrain features. <a href="https://github.com/kickiniteasy/discgolfgame/blob/main/docs/course_schema.md" target="_blank">View Schema Documentation</a></p>
                            
                            <div class="form-group">
                                <input type="file" id="course-file" accept=".json,.svg" style="display: none;">
                                <button id="upload-course-button" class="primary-button">
                                    <svg class="upload-icon" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 8px;">
                                        <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z"/>
                                    </svg>
                                    Upload Your Course
                                </button>
                            </div>

                            <div class="form-group">
                                <label for="course-url">Load Course from URL</label>
                                <div class="input-group">
                                    <input type="url" id="course-url" placeholder="Enter course JSON URL">
                                    <button id="load-course-url">Load</button>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="course-json">Load Course from JSON</label>
                                <textarea id="course-json" rows="4" placeholder="Paste course JSON here"></textarea>
                                <button id="load-course-json">Load JSON</button>
                            </div>

                            <div class="course-actions">
                                <button id="copy-course" class="secondary-button">Copy Course</button>
                                <button id="save-course" class="secondary-button">Save Course</button>
                            </div>

                            <div class="course-info">
                                <p>You can create your own courses using any SVG editor like Inkscape or Adobe Illustrator.</p>
                                <p>Export as SVG and upload here, or copy/paste the JSON data directly.</p>
                            </div>
                        </div>
                        <div id="dev-tab" class="tab">
                            <div class="settings-container">
                                <div class="setting-item">
                                    <label for="show-hitboxes">Show Hitboxes</label>
                                    <input type="checkbox" id="show-hitboxes">
                                </div>
                                <div class="setting-item">
                                    <label for="show-fps">Show FPS Counter</label>
                                    <input type="checkbox" id="show-fps">
                                </div>
                                <div class="setting-item">
                                    <label for="disable-grass">Disable Grass Textures</label>
                                    <input type="checkbox" id="disable-grass">
                                </div>
                                <div class="setting-item">
                                    <label for="disable-sky-walls">Disable Sky Walls</label>
                                    <input type="checkbox" id="disable-sky-walls">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="version-section">
                        Version: <span id="app-version"></span>
                        <button class="dev-button tab-button" data-tab="dev">Dev</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="game-complete-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üèÜ Game Complete!</h2>
                </div>
                <div class="modal-body">
                    <div id="winner-display"></div>
                    <div id="final-scores" class="final-scores"></div>
                    <div class="game-complete-buttons">
                        <button id="replay-course-button" class="game-complete-button outline">
                            Replay Course
                        </button>
                        <button id="next-course-button" class="game-complete-button primary">
                            Next Course
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="message"></div>
    </div>
</body>
</html>